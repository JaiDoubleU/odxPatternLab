<style>
    .line {
        stroke: steelblue;
        stroke-width: 0.5;
        fill: none;
    }

    .axis .text {
        font-size: 11px;
    }

    .tick .text {
        color: #333;
    }

    .axis path {
        stroke: steelblue;
    }

    .circle {
        stroke: steelblue;
        fill: cadetblue;
    }
</style>

<link href="../../css/00-navbar-alternate.css" rel="alternate stylesheet" type="text/css" title="alternate">
<nav  id="defaultNavbar" role="navigation" class="navbar navbar-default navbar-fixed-top">
    <div id="message"></div>
    <div class="container-fluid">
        <div class="navbar-header navbar-left pull-left">
            <button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="btn btn-default btn-sm navbar-btn pull-left">
                Menu
            </button>
            <div class="navbar-brand hidden-xs hidden-sm">
                <a class="logo-navbar"></a>
            </div>
        </div>
        <div class="navbar-header navbar-right pull-right">
            <ul class="nav navbar-nav navbar-right">
                <li class="hidden visible-xs pull-left">
                    <a class="label-success navbar-link">
                        <i class="fas fa-sack-dollar fa-fw"></i>
                        <div class="pull-right" style="width: 60px; white-space: normal;float:right;line-height: 1;font-size: 13px; text-align: center;">Get Paid Faster! </div>
                    </a>
                </li>
                <li class="hidden visible-xs visible-sm dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fas fa-search fa-fw"></i></a>
                    <ul class="dropdown-menu dropdown-menu-right" style="padding: 15px;min-width: 250px;">
                        <li>
                            <div class="row">
                                <div class="col-md-12">
                                    <form>
                                        <div class="input-group input-group-sm ">
                                            <span class="input-group-addon dropdown-toggle" data-toggle="dropdown"
                                                aria-haspopup="true" aria-expanded="false">
                                                <span class="caret"></span>
                                            </span>
                                            <ul class="dropdown-menu dropdown-menu-left">
                                                <li onclick="setGlobalSearchPlaceholder($(this).first().text());"><a>Invoice #</a></li>
                                                <li onclick="setGlobalSearchPlaceholder($(this).first().text());"><a href="#">Pricebook #</a></li>
                                                <li onclick="setGlobalSearchPlaceholder($(this).first().text());"><a href="#">Field Ticket #</a></li>
                                                <li onclick="setGlobalSearchPlaceholder($(this).first().text());"><a href="#">Purchase Order #</a></li>
                                            </ul>

                                            <input class="form-control" id="globalSearch" placeholder="Invoice #">

                                            <span class="input-group-btn">
                                                <button class="btn btn-default"><i class="fas fa-search fa-fw"></i></button>
                                            </span>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a title="Message Centre" class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <span class="badge badge-xs">49</span>
                        <i class="fas fa-bell fa-fw"></i>
                        <!-- <span class="hidden-xs hide">Messages</span> -->
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right">
                        <li>
                            <a title="Message Centre" href="#">
                                <span class="fa-fw">
                                    <i class="fas fa-envelope"></i>
                                    Messages
                                </span>
                                <sup class="badge" style="background:#BE3A34">41</sup>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span class="fa-fw">
                                    <i class="fas fa-file-alt"></i>
                                    Completed Reports
                                </span>
                                <sup class="badge" style="background:#BE3A34">8</sup>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a title="Help Center" class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fas fa-question-circle fa-fw"></i> <span class="hidden-xs hide">Help</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right">
                        <li><a href="#"><i class="fas fa-life-ring fa-fw"></i> Contact Support</a></li>
                        <li><a href="#"><i class="fas fa-book fa-fw"></i> Resource Center</a></li>
                        <li><a href="#"><i class="fas fa-comment fa-fw"></i> Feedback</a></li>
                        <li><a href="#"><i class="fas fa-users fa-fw"></i> About</a></li>
                        <li><a href="#"><i class="fas fa-user-secret fa-fw"></i> Privacy</a></li>
                        <li><a href="#"><i class="fas fa-gavel fa-fw"></i> Terms</a></li>
                        <li><a href="#"><i class="fas fa-globe fa-fw"></i> Browsers</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a title="My Profile" class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fas fa-user fa-fw"></i> <span class="hidden-xs hide">Profile</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right">
                        <li><a href="#"><i class="fas fa-user fa-fw"></i> Christopher Schwartzenberg</a></li>
                        <li><a href="#"><i class="fas fa-cog fa-fw"></i> Preferences</a></li>
                        <li><a href="#"><i class="fas fa-font fa-fw"></i> Font Size</a></li>
                    </ul>
                </li>
                <li><a title="Sign Out" href="#"><i class="fas fa-sign-out fa-fw"></i></a></li>
            </ul>
        </div>
        <ul class="nav navbar-nav navbar-left">
            <li class="pull-left">
                <p class="navbar-text hide-overflow small hidden-sm hidden-xs" style="max-width: 225px;">Tetratrex
                    Oilfield Services Incorporated Ltd.
                </p>
            </li>
        </ul>
        <ul class="nav navbar-nav navbar-right visible-sm visible-md visible-lg hidden-xs">
            <li class="pull-left">
                <a class="label-success navbar-link">
                    <i class="fas fa-sack-dollar fa-fw"></i>
                    <div class="pull-right" style="width: 60px; white-space: normal;float:right;line-height: 1;font-size: 13px; text-align: center;">Get Paid Faster! </div>
                </a>
            </li>
            <li>
                <form class="navbar-form navbar-right">
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false">
                                <span class="caret"></span>
                            </span>
                            <ul class="dropdown-menu dropdown-menu-left">
                                <li onclick="setGlobalSearchPlaceholder($(this).first().text());"><a href="#">Invoice #</a></li>
                                <li onclick="setGlobalSearchPlaceholder($(this).first().text());"><a href="#">Pricebook #</a></li>
                                <li onclick="setGlobalSearchPlaceholder($(this).first().text());"><a href="#">Field Ticket #</a></li>
                                <li onclick="setGlobalSearchPlaceholder($(this).first().text());"><a href="#">Purchase Order #</a></li>
                            </ul>

                            <input class="form-control" id="globalSearch" placeholder="Invoice #">

                            <span class="input-group-btn">
                                <button class="btn btn-default"><i class="fas fa-search fa-fw"></i></button>
                            </span>
                        </div>
                    </div>
                </form>
            </li>
        </ul>
    </div>
</nav>

<nav id="secondaryNavbar" class="navbar-default animated navbar-fixed-top " style="z-index: 1030">
    <div class="container-fluid">
        <div class="row">
                <div class="col-xs-4">
                </div>
                <div class="col-xs-4 text-center hide-overflow">
                    <div class="form-control-static">
                        Audit Analytics Dashboard
                    </div>
                </div>
                <div class="col-xs-4 text-right text-nowrap">
                </div>
            </div>
        </div>
    </div>
</nav>


<div class="container-fluid  page-top-padding">
    <!-- <div class="row">
        <div class="col-xs-12">
            <div class="lead">
    <div class="h4">
        <strong>
            Audit Analytics Dashboard
        </strong>
    </div>
</div>

        </div>
    </div> -->
    <div class="row">
        <div class="col-xs-12 col-md-4">
            <div class="panel status-panel">
                <div class="panel-heading">
                    <div class="panel-title text-muted">
                        <div class="h5">
                            My Anomalies
                        </div>
                        <p class="text-muted small">Anomalies Assigned to Me by Status</p>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row text-nowrap">
                        <div class="col-sm-3 col-xs-6 text-center">
                            <div class="small text-muted">New</div>
                            <a href="/patterns/06-pages-audit-analytics-anomalies-list/06-pages-audit-analytics-anomalies-list.html" class="btn btn-block text-center text-success">
                                <div class="h3 ">1</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted text-center">Pending</div>
                            <a href="/patterns/06-pages-audit-analytics-anomalies-list/06-pages-audit-analytics-anomalies-list.html" class="btn btn-block text-center">
                                <div class="h3">1</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted text-center">Assigned</div>
                            <a href="/patterns/06-pages-audit-analytics-anomalies-list/06-pages-audit-analytics-anomalies-list.html" class="btn btn-block text-center">
                                <div class="h3">2</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted text-center">Released <span class="text-success">*</span></div>
                            <a href="/patterns/06-pages-audit-analytics-anomalies-list/06-pages-audit-analytics-anomalies-list.html" class="btn btn-block text-center">
                                <div class="h3">6</div>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="panel-heading">
                    <small class="text-muted"><span class="text-info">*</span> = Anomalies released in the last 90
                        days</small>
                </div>
            </div>

            <div class="panel status-panel">
                <div class="panel-heading">
                    <div class="panel-title text-muted">
                        <div class="h5">
                            My Cases
                        </div>
                        <p class="text-muted small">Cases Assigned to Me by Status</p>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row  text-nowrap">
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted text-center">New</div>
                            <a href="/patterns/06-pages-audit-analytics-case-list/06-pages-audit-analytics-case-list.html" class="btn btn-block text-center">
                                <div class="h3 text-success">1</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted text-center">Pending</div>
                            <a href="/patterns/06-pages-audit-analytics-case-list/06-pages-audit-analytics-case-list.html" class="btn btn-block text-center">
                                <div class="h3">0</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted text-center">Investigating</div>
                            <a href="/patterns/06-pages-audit-analytics-case-list/06-pages-audit-analytics-case-list.html" class="btn btn-block text-center">
                                <div class="h3">2</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted text-center">Resolved <span
                                    class="text-success">*</span></div>
                            <a href="/patterns/06-pages-audit-analytics-case-list/06-pages-audit-analytics-case-list.html" class="btn btn-block text-center">
                                <div class="h3">18</div>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="panel-heading text-muted ">
                    <small><span class="text-info">*</span> = Cases resolved in the last 90 days</small>
                </div>
            </div>

        </div>
        <div class="col-xs-12 col-md-4">
            <div class="panel status-panel">
                <div class="panel-heading">
                    <div class="panel-title text-muted text-left">
                        <div class="h5">
                            Anomalies
                        </div>
                        <p class="text-muted small">All Anomalies by Status</p>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row text-nowrap">
                        <div class="col-sm-3 col-xs-6 text-center">
                            <div class="small text-muted">New</div>
                            <a href="/patterns/06-pages-audit-analytics-anomalies-list/06-pages-audit-analytics-anomalies-list.html" class="btn btn-block text-center text-success">
                                <div class="h3 ">3</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted">Pending</div>
                            <a href="/patterns/06-pages-audit-analytics-anomalies-list/06-pages-audit-analytics-anomalies-list.html" class="btn btn-block text-center">
                                <div class="h3">1</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted">Assigned</div>
                            <a href="/patterns/06-pages-audit-analytics-anomalies-list/06-pages-audit-analytics-anomalies-list.html" class="btn btn-block text-center">
                                <div class="h3">12</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted">Released <span class="text-success">*</span></div>
                            <a href="/patterns/06-pages-audit-analytics-anomalies-list/06-pages-audit-analytics-anomalies-list.html" class="btn btn-block text-center">
                                <div class="h3">19</div>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="panel-heading">
                    <small class="text-muted"><span class="text-info">*</span> = Anomalies released in the last 90
                        days</small>
                </div>
            </div>

            <div class="panel status-panel">
                <div class="panel-heading">
                    <div class="panel-title text-muted">
                        <div class="h5">
                            Cases
                        </div>
                        <p class="text-muted small">All Cases by Status</p>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row text-nowrap">
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted">New</div>
                            <a href="/patterns/06-pages-audit-analytics-case-list/06-pages-audit-analytics-case-list.html" class="btn btn-block text-center">
                                <div class="h3 text-success">12</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted">Pending</div>
                            <a href="/patterns/06-pages-audit-analytics-case-list/06-pages-audit-analytics-case-list.html" class="btn btn-block text-center">
                                <div class="h3">3</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted">Investigating</div>
                            <a href="/patterns/06-pages-audit-analytics-case-list/06-pages-audit-analytics-case-list.html" class="btn btn-block text-center">
                                <div class="h3">12</div>
                            </a>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="small text-muted">Resolved <span class="text-success">*</span></div>
                            <a href="/patterns/06-pages-audit-analytics-case-list/06-pages-audit-analytics-case-list.html" class="btn btn-block text-center">
                                <div class="h3">12</div>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="panel-heading text-muted ">
                    <small><span class="text-info">*</span> = Cases resolved in the last 90 days</small>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-md-4">
            <div class="panel status-panel">
                <div class="panel-heading">
                    <div class="panel-title text-muted">
                        <div class="h5">
                            Quarantined Spend
                        </div>
                        <p class="text-muted small">Trend of Spend Quarantined over the last 6 months </p>
                    </div>
                </div>
                <div class="panel-body">
                    <div id="quarantined-spend-chart"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var generateQuarantinedSpendChart = function(containerId) {
        var container = document.getElementById(containerId);
        var containerWidth = container.offsetWidth;
        var containerHeight = 150;

        var data = [
            {date: "2019-08", value: "4"},
            {date: "2019-09", value: "5"},
            {date: "2019-10", value: "7"},
            {date: "2019-11", value: "9"},
            {date: "2019-12", value: "6"},
            {date: "2020-01", value: "5"},
            {date: "2020-02", value: "7"}
        ];

        var width = containerWidth -40;
        var height = containerHeight;
        var margin = 40;

        /* Format Data */
        var parseDate = d3.timeParse("%Y-%m");
        data.forEach(function(d) {
            d.date = parseDate(d.date);
            d.value = +d.value;
        });


        /* Scale */
        var xScale = d3.scaleTime()
        .domain(d3.extent(data, d => d.date))
        .range([0, width-margin]);

        var yScale = d3.scaleLinear()
        .domain([0, d3.max(data, d => d.value)])
        .range([height-margin, 0]);

        // .call(d3.axisBottom(xScale)
        // .tickFormat(d3.timeFormat("%b")))


        /* Add SVG */
        var svg = d3.select('#'+containerId).append("svg")
        .attr("width", (width+margin)+"px")
        .attr("height", (height+margin)+"px")
        .append('g')
        .attr("transform", `translate(${margin}, ${margin})`);


        /* Add line into SVG */
        var line = d3.line()
        .x(d => xScale(d.date))
        .y(d => yScale(d.value));

        svg.append('path')
        .attr('class', 'line')
        .attr('d', line(data));


        /* Add circles in the line */
        svg.append("g")
            .selectAll("circle")
            .data(data).enter()
            .append("g")
            .attr("class", "circle")
            .on("mouseover", function(d) {
            d3.select(this)
            .style("cursor", "pointer")
            .style("fill", "red")
            .append("text")
            .attr("class", "text")
            .text(d.value)
            .attr("x", d => xScale(d.date) + 5)
            .attr("y", d => yScale(d.value) - 5);
            })
            .on("mouseout", function(d) {
            d3.select(this)
            .style("cursor", "none")
            .style("fill", "black")
            .select("text").remove();
            })
            .append("circle")
            .attr("cx", d => xScale(d.date))
            .attr("cy", d => yScale(d.value))
            .attr("r", 4);


        /* Add Axis into SVG */
        var xAxis = d3.axisBottom(xScale).tickFormat(d3.timeFormat("%b")).ticks(5);
        var yAxis = d3.axisLeft(yScale).ticks(5);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", `translate(0, ${height-margin})`)
            .call(xAxis);

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .append('text')
            .attr("y", -25)
            .attr("x", -10)
            .attr("transform", "rotate(-90)")
            .attr("fill", "#666")
            .attr("class", "text")
            .text("Percent of Spend");

    }

    document.addEventListener('DOMContentLoaded', function () {
        $('body').addClass('page-bg');
        generateQuarantinedSpendChart("quarantined-spend-chart");
    }, false);
</script>
