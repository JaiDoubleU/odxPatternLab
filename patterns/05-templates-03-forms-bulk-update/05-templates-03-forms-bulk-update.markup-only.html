
<div id="splitCodingModal" class="modal fade in" role="dialog" size="lg" index="0" animate="animate" tabindex="-1" style="display: contents;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">x</button>
                <div class="lead modal-title">Bulk Update</div>
            </div>
            <div class="modal-body">
                <div class="tab-content" style="border: none;">
                    <div class="tab-pane active" id="tab1">
                        <div class="row">
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label class="control-label">Apply a Tamplate</label><br />
                                    <div class="btn-group">
                                        <button class="btn btn-default dropdown-toggle" type="button" id="selectTemplate" data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="true">
                                            No Template
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="selectTemplate">
                                            <li
                                                onclick="loadTemplate(1); $('#selectTemplate').html($(this).children().first().text() +' <span class=\'caret \'></span>' );">
                                                <a href="#">No Template</a>
                                            </li>
                                                <li
                                                    onclick="loadTemplate(1); $('#allocationsFld').removeClass('hide'); $('#selectTemplate').html($(this).children().first().text() +' <span class=\'caret \'></span>' );">
                                                    <a href="#">Split Template 1</a>
                                                </li>
                                                <li
                                                    onclick="loadTemplate(2); $('#allocationsFld').removeClass('hide'); $('#selectTemplate').html($(this).children().first().text() +' <span class=\'caret \'></span>' );">
                                                    <a href="#">Split Template 2</a>
                                                </li>
                                                <li
                                                    onclick="loadTemplate(3); $('#allocationsFld').removeClass('hide'); $('#selectTemplate').html($(this).children().first().text() +' <span class=\'caret \'></span>' );">
                                                    <a href="#">Split Template 3</a>
                                                </li>
                                                <li
                                                    onclick="loadTemplate(4); $('#allocationsFld').removeClass('hide'); $('#selectTemplate').html($(this).children().first().text() +' <span class=\'caret \'></span>' );">
                                                    <a href="#">Split Template 4</a>
                                                </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="form-group has-feedback">
                                    <label class="control-label">Add A Field </label><br />
                                    <div class="btn-group">
                                        <a href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                                            Please Select
                                            <span class="caret"></span>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li onclick="$('#poFld').toggleClass('hide');"><a href="#">Purchase Order</a></li>
                                            <li onclick="$('#fieldApproverFld').toggleClass('hide');"><a href="#">Field Approver</a></li>
                                            <li
                                                onclick="$('#afeFld').toggleClass('hide'); if(!$('#allocationsFld').hasClass('hide')){$('#allocationsFld').addClass('hide');}">
                                                <a href="#">AFE</a></li>
                                            <li
                                                onclick="$('#ccFld').toggleClass('hide'); if(!$('#allocationsFld').hasClass('hide')){$('#allocationsFld').addClass('hide');}">
                                                <a href="#">Cost Center</a></li>
                                            <li
                                                onclick="$('#codingFld').toggleClass('hide'); if(!$('#allocationsFld').hasClass('hide')){$('#allocationsFld').addClass('hide');}">
                                                <a href="#">Major/Minor/Subcode</a></li>
                                            <li
                                                onclick="$('#allocationsFld').toggleClass('hide');if(!$('#afeFld').hasClass('hide')){$('#afeFld').addClass('hide');} if(!$('#ccFld').hasClass('hide')){$('#ccFld').addClass('hide')} if(!$('#codingFld').hasClass('hide')){$('#codingFld').addClass('hide')};;">
                                                <a href="#">Coding Allocation</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div id="poFld" class="col-xs-12 col-sm-6 hide">
                                <div class="form-group has-feedback">
                                    <label class="control-label">Purchase Order</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control">
                                        <span class="input-group-addon">
                                            <input type="checkbox">&nbsp;Clear
                                        </span>
                                        <span class="input-group-addon" onclick="$('#poFld').toggleClass('hide');">
                                            <i class="far fa-trash-alt fa-fw"></i>
                                        </span>
                                </div>
                                </div>
                            </div>
                            <div id="fieldApproverFld" class="col-xs-12 col-sm-6 hide">
                                <div class="form-group has-feedback">
                                    <label class="control-label">Field Approver</label>
                                    <div class="input-group"><input type="text" class="form-control"><span class="input-group-addon"><input
                                                type="checkbox">&nbsp;Clear</span>
                                             <span class="input-group-addon" onclick="$('#fieldApproverFld').toggleClass('hide');">
                                                 <i class="far fa-trash-alt fa-fw"></i>
                                             </span>
                                    </div>
                                </div>
                            </div>
                            <div id="afeFld" class="col-xs-12 col-sm-6 hide">
                                <div class="form-group has-feedback">
                                    <label class="control-label">AFE</label>
                                    <div class="input-group"><input type="text" class="form-control"><span class="input-group-addon"><input
                                                type="checkbox">&nbsp;Clear</span>
                                        <span class="input-group-addon" onclick="$('#afeFld').toggleClass('hide');">
                                            <i class="far fa-trash-alt fa-fw"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div id="ccFld" class="col-xs-12 col-sm-6 hide">
                                <div class="form-group has-feedback">
                                    <label class="control-label">Cost Center</label>
                                    <div class="input-group"><input type="text" class="form-control"><span class="input-group-addon"><input
                                                type="checkbox">&nbsp;Clear
                                            </span>
                                         <span class="input-group-addon" onclick="$('#ccFld').toggleClass('hide');">
                                             <i class="far fa-trash-alt fa-fw"></i>
                                         </span>
                                    </div>
                                </div>
                            </div>
                            <div id="codingFld" class="col-xs-12 col-sm-6 hide">
                                <div class="form-group has-feedback">
                                    <label class="control-label">Major/Minor/Sub</label>
                                    <div class="input-group"><input type="text" class="form-control"><span class="input-group-addon"><input
                                                type="checkbox">&nbsp;Clear</span>
                                         <span class="input-group-addon" onclick="$('#codingFld').toggleClass('hide');">
                                             <i class="far fa-trash-alt fa-fw"></i>
                                         </span>
                                    </div>
                                </div>
                            </div>
                           <div id="allocationsFld" class="col-xs-12 hide">
                               <div class="table-responsive">
                                   <table class="table table-striped table-hover" width="100%">
                                       <thead>
                                           <tr>
                                               <th>AFE</th>
                                               <th>Cost Center</th>
                                               <th>Major</td>
                                               <th>Minor</th>
                                               <th>Subcode</th>
                                               <th width="14%">Percentage</th>
                                               <th width="14%">Amount</th>
                                               <th width="5%">Delete</th>
                                           </tr>

                                           <tr id="splitRow">
                                               <td> <input type="text" class="form-control"></td>
                                               <td> <input type="text" class="form-control"></td>
                                               <td> <input type="text" class="form-control"></td>
                                               <td> <input type="text" class="form-control"></td>
                                               <td> <input type="text" class="form-control"></td>
                                               <td> <input type="text" class="form-control"></td>
                                               <td> <input type="text" class="form-control"></td>
                                               <td class="text-center"> <button id="deleteRowBtn"
                                                       onclick="$(this).parents('tr').remove();"
                                                       class="btn btn-default btn-block"><i
                                                           class="fas fa-trash-alt"></i></button> </td>
                                           </tr>
                                       </thead>
                                   </table>
                               </div>

                               <div class="form-group" id="addASplitButton">
                                   <button class="btn btn-default"
                                       onclick="var splitRow = $('#splitRow').clone(); splitRow.addClass('clonedSplitRow'); splitRow.insertAfter($('#splitRow'));">
                                       Add an Allocation</button>
                               </div>
                           </div>
                        </div>
                    </div>
                    <div class="tab-pane" id="tab2">
                        <div class="form-group">
                            <label class="control-label">Template Name</label>
                            <input type="text" class="form-control" value="My Template">
                        </div>
                        <div class="form-group">
                            <label class="control-label">Scope</label>
                            <div class="radio">
                                <label><input type="radio" name="optradio" checked>Private</label>
                                &nbsp;
                                <label><input type="radio" name="optradio">Public</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Site</label>
                            <select class="form-control">
                                <option>Please Select</option>
                                    <option >Site 1</option>
                                    <option >Site 2</option>
                                    <option >Site 3</option>
                                    <option >Site 4</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Department</label>
                            <select class="form-control">
                                <option>Please Select</option>
                                     <option >Dept 1</option>
                                     <option >Dept 2</option>
                                     <option >Dept 3</option>
                                     <option >Dept 4</option>
                            </select>
                        </div>
                        <div class="form-group">
                        </div>
                    </div>
                    <div class="tab-pane" id="tab3">
                           <div id="templatesList">
                               <div class="table-responsive">
                                   <table class="table table-hover" width="100%">
                                        <thead>
                                            <tr >
                                                <th>Use</th>
                                                <th></th>
                                                <th>Template</th>
                                                <th>Allocation</th>
                                                <th>Scope</th>
                                                <th>Site</th>
                                                <th>Department</th>
                                                <th>Owner</th>
                                                <th>Delete</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        <tr class="pointerCursor">
                                            <td onclick="loadTemplate(3);"><input type="radio" href="#tab1" data-toggle="tab" ></td>
                                            <td onclick="loadTemplate(3);"></td>
                                            <td onclick="loadTemplate(3);">Split Template 3</td>
                                            <td onclick="loadTemplate(3);">Percent</td>
                                            <td onclick="loadTemplate(3);" class="text-center">Private</td>
                                            <td onclick="loadTemplate(3);"></td>
                                            <td onclick="loadTemplate(3);"></td>
                                            <td onclick="loadTemplate(3);">Smith, Tim A.</td>
                                            <td class="text-center">
                                                <i class="far fa-trash-alt fa-fw"></i>
                                            </td>
                                        </tr>
                                        <tr class="pointerCursor" onclick="loadTemplate(4);">
                                            <td onclick="loadTemplate(4);"><input type="radio" href="#tab1" data-toggle="tab" ></td>
                                            <td onclick="loadTemplate(4);"></td>
                                            <td onclick="loadTemplate(4);">Split Template 4</td>
                                            <td onclick="loadTemplate(4);">Percent</td>
                                            <td onclick="loadTemplate(4);" class="text-center">Public</td>
                                            <td onclick="loadTemplate(4);">Western Region</td>
                                            <td onclick="loadTemplate(4);">Accounts Payable</td>
                                            <td onclick="loadTemplate(4);">Garnett, Andrew G.</td>
                                            <td class="text-center">
                                                <i class="far fa-trash-alt fa-fw"></i>
                                            </td>
                                        </td>
                                   </table>
                               </div>
                           </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default pull-left" data-dismiss="modal">Cancel</button>
                <span id="templateActionsBtn"class="dropdown">
                    <a href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        Template Actions <span class="caret"></span>
                    </a>

                    <ul class="dropdown-menu">
                        <li href="#tab2" data-toggle="tab" onmouseup="$('this').removeClass('active');" onclick=" $('#applySplitBtn').toggleClass('hide'); $('#saveTemplate').toggleClass('hide'); $('#templateActionsBtn').toggleClass('hide'); ">
                            <a >
                                Save Template
                            </a>
                        </li>
                        <li href="#tab2" data-toggle="tab" onmouseup="$('this').removeClass('active');" onclick="$('#applySplitBtn').toggleClass('hide'); $('#saveTemplate').toggleClass('hide'); $('#templateActionsBtn').toggleClass('hide'); ">
                            <a onmouseup="$('this').parent().removeClass('active');">
                                Save as new Template...
                            </a>
                        </li>
                        <li href="#tab3" data-toggle="tab" onmouseup="$('this').removeClass('active');">
                            <a>Manage Templates</a>
                        </li>
                        <li onmouseup="$('this').removeClass('active');">
                            <a href="#">Export Template</a>
                        </li>
                        <li onmouseup="$('this').removeClass('active');">
                            <a href="#">Delete Template</a>
                        </li>
                    </ul>
                </span>
                <!-- <button class="btn btn-success" id="saveAsTemplate" href="#tab2" data-toggle="tab"
                    onclick="$('#applySplitBtn').toggleClass('hide'); $('#saveTemplate').toggleClass('hide'); $('#templateActionsBtn').toggleClass('hide'); ">Save As
                </button> -->

                <button class="btn btn-success hide" id="saveTemplate" href="#tab1" data-toggle="tab" onclick="$('#saveTemplate').toggleClass('hide'); $('#templateActionsBtn').toggleClass('hide'); ">Save </button>
                <button id="applySplitBtn" class="btn btn-success" href="#tab1" data-toggle="tab">Update Tickets</button>
            </div>
        </div>
    </div>
</div>
<script>
    function loadTemplate(templateNumber) {
        var clonedRows = $('.clonedSplitRow');
         for (let index = 0; index < clonedRows.length; index++) {
            clonedRows[index].remove();
         }


        for (let index = 0; index < templateNumber; index++) {
            var splitRow = $('#splitRow').clone();
            splitRow.attr('id', 'splitRow' + index)
            splitRow.addClass('clonedSplitRow');
            var inputs = splitRow.find('input');
            for (let n = 0; n < inputs.length; n++) {
                var fakeVal = fakerator.internet.color();
                inputs[n].value = fakeVal;
                if(n == 5) {
                    inputs[n].value = fakerator.random.number(45).toFixed(1);
                }
                if(n == 6) {
                    inputs[n].value = fakerator.random.number(425).toFixed(2);
                }
            }
            splitRow.insertAfter($('#splitRow'));
        }

        $('#deleteSplitTemplateBtn').toggleClass('hide');
    }
</script>
