{{> organisms-navbar("extraClass":"navbar-fixed-top")}} {{> organisms-secondary-navbar("showBackButton":true,"pageTitle": "Rental #0000567","hideNextPreviousButtons": false, "showConfigureButton":false, "extraClass":"navbar-fixed-top")}}

<style>
    .majorMinorSubWrapper {
        display: grid;
        grid-gap: 0;
        grid-template-columns: minmax(100px, 1fr) minmax(100px, 1fr) minmax(100px, 1fr);
    }

    .majorMinorSubWrapper .form-control:not(:first-child) {
        border-left: none;
    }
</style>
<div class="container-fluid page-top-padding page-bottom-padding">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-12">
                    {{> templates-document-header("documentNumber":"Rental #0000567","documentDate":"06/21/2018","documentCurrency":"USD","documentAmount":"48,000.00","documentStatus":"Approved", "documentType":"General","documentCompanyName":"Acme Oilfield Services Ltd.","showDocumentAlert":true,"documentAlert":"Paused")}}
                </div>
            </div>
            <div class="row">
                <div class="col-sm-9">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title">
                                Rental Header

                                <div id="panelFormHeaderButtons" class="btn-group btn-group-sm pull-right">
                                    <button class="btn btn-default edit" onclick="$(this).siblings('.saveCancel').toggleClass('hide');  $(this).toggleClass('hide'); $('#TicketHeaderForm > fieldset').prop('disabled',false);">Edit</button>
                                    <button class="btn btn-success saveCancel hide" onclick="$(this).toggleClass('hide'); $(this).siblings('.saveCancel').toggleClass('hide');  $(this).siblings('.edit').toggleClass('hide'); $('#TicketHeaderForm > fieldset').prop('disabled',true);">Save</button>
                                    <button class="btn btn-default saveCancel hide" onclick="$(this).toggleClass('hide'); $(this).siblings('.saveCancel').toggleClass('hide');  $(this).siblings('.edit').toggleClass('hide');$('#TicketHeaderForm > fieldset').prop('disabled',true);">Cancel</button>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <form id="TicketHeaderForm">
                                <div class="text-right  text-danger"> * <small>= Required on Approval </small></div>
                                <fieldset disabled>
                                    <div class="row">
                                        <div class="form-group col-sm-6 ">
                                            <label for="ticketServiceDate">Rental Start {{> atoms-required-field-indicator}}</label> {{> atoms-input("inputId":"ticketServiceDate", "value":"11/20/2018.", "placeholder":"")}}
                                        </div>
                                        <div class="form-group  col-sm-6 ">
                                            <label for="currencyFld">Rental End {{> atoms-required-field-indicator}}</label> {{> atoms-input("inputId":"currencyFld", "value":"CAD", "placeholder":"")}}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-sm-6 ">
                                            <label for="ticketServiceDate">Service Date {{> atoms-required-field-indicator}}</label> {{> atoms-input("inputId":"ticketServiceDate", "value":"11/20/2018.", "placeholder":"")}}
                                        </div>
                                        <div class="form-group  col-sm-6 ">
                                            <label for="currencyFld">Paused Status {{> atoms-required-field-indicator}}</label> {{> atoms-input("inputId":"currencyFld", "value":"Paused", "placeholder":"")}}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-sm-6 ">
                                            <label for="ticketRequisitioner">Requisitioner {{> atoms-required-field-indicator}}</label> {{> atoms-input("inputId":"ticketRequisitioner", "value":"Smith, Greg A.", "placeholder":"")}}
                                        </div>
                                        <div class="form-group col-sm-6 ">
                                            <label for="ticketSuperintendent" class="control-label clearfix">Superintendent</label> {{> atoms-input("inputId":"ticketSuperintendent", "value":"", "placeholder":"")}}
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-sm-6 ">
                                            <label for="ticketOfficeApprover">Office Approver</label> {{> atoms-input("id":"ticketOfficeApprover", "value":"", "placeholder":"")}}
                                        </div>
                                        <div class="form-group col-sm-6 ">
                                            <label for="ticketLocationFld" class="control-label clearfix">Location</label> {{> atoms-input("id":"ticketLocationFld", "value":"", "placeholder":"")}}
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="ticketDescription">Description</label>
                                        <textarea class="form-control" id="ticketDescription"></textarea>
                                    </div>

                                    <div class="form-group">
                                        <label for="ticketDescription">Allocation Summary</label>

                                        <table id="ticketAllocationSummary" class="display table table-hover" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th width="30%">AFE</th>
                                                    <th width="30%">CC</th>
                                                    <th width="25%">Major.Minor.Subcode</th>
                                                    <th width="15%" class="text-center">Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody id="ticketAllocationSummaryContent">
                                                <tr id="row0">
                                                    <td class="text-left">14400</td>
                                                    <td class="text-left">310</td>
                                                    <td class="text-left">1200.270.10</td>
                                                    <td class="text-right">28,330.36</td>
                                                </tr>
                                                <tr id="row1">
                                                    <td class="text-left">12900</td>
                                                    <td class="text-left">530</td>
                                                    <td class="text-left">1200.290.90</td>
                                                    <td class="text-right">29,443.59</td>
                                                </tr>
                                                <tr id="row2">
                                                    <td class="text-left">15887</td>
                                                    <td class="text-left">510</td>
                                                    <td class="text-left">1200.290.90</td>
                                                    <td class="text-right">9,343.64</td>
                                                </tr>
                                            </tbody>
                                            <tbody id="ticketAllocationSummaryCollapsedContent" class="collapse">
                                                <tr id="row3">
                                                    <td class="text-left">50100</td>
                                                    <td class="text-left">100</td>
                                                    <td class="text-left">3000.120.10</td>
                                                    <td class="text-right">29,938.62</td>
                                                </tr>
                                                <tr id="row4">
                                                    <td class="text-left">32700</td>
                                                    <td class="text-left">210</td>
                                                    <td class="text-left">3200.120.10</td>
                                                    <td class="text-right">30,889.36</td>
                                                </tr>
                                                <tr id="row4">
                                                    <td class="text-left">50100</td>
                                                    <td class="text-left">100</td>
                                                    <td class="text-left">3200.100.10</td>
                                                    <td class="text-right">30,193.92</td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr id="footerRow">
                                                    <td colspan="4">
                                                        <a id="ticketAllocationSummaryShowMore" onmouseup="$(this).toggleClass('hide'); $(this).siblings().toggleClass('hide');" class="" data-toggle="collapse" data-target="#ticketAllocationSummaryCollapsedContent"> Show More <i class="fa fa-chevron-down"></i></a>
                                                        <a id="ticketAllocationSummaryShowLess" onmouseup="$(this).toggleClass('hide'); $(this).siblings().toggleClass('hide');" class="hide" data-toggle="collapse" data-target="#ticketAllocationSummaryCollapsedContent"> Show Less <i class="fa fa-chevron-up"></i></a>
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title">
                                Line Items
                                <div class="btn-group btn-group-sm pull-right">
                                    <button id="addLineItemBtn" class="btn btn-default btn-sm">Add Line Item</button>
                                    <button id="bulkEditBtn" class="btn btn-default">Bulk Edit</button>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div id="ticketLineItemsMessage"></div>

                            <div class="table-responsive">
                                <table class="table table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th class="text-center"><input id="selectAllTicketsChk" type="checkbox"></th>
                                            <th width="24" class="text-center">Alert</th>
                                            <th>Product/Service</th>
                                            <th>Description</th>
                                            <th width="90">Start Date</th>
                                            <th>Location</th>
                                            <th>Qty</th>
                                            <th>Units</th>
                                            <th class="text-center">Rate</th>
                                            <th class="text-center">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th class="text-center"><input name="ticketLineCheckbox" type="checkbox"></th>
                                            <td class="text-center"><i class="fas fa-exclamation-triangle text-danger" </td> <td>P100</td>
                                            <td>100 Ton Hauler</td>
                                            <td>2017/10/14</td>
                                            <td>88625415-2547-5</td>
                                            <td>12</td>
                                            <td>Days</td>
                                            <td class="text-right">100.00</td>
                                            <td class="text-right">1200.00</td>
                                        </tr>
                                        <tr>
                                            <th  class="text-center"><input name="ticketLineCheckbox"  type="checkbox"></th>
                                            <td class="text-center"></td>
                                            <td>P100</td>
                                            <td>100 Ton Hauler</td>
                                            <td>2017/10/14</td>
                                            <td>88625415-2547-5</td>
                                            <td>12</td>
                                            <td>Days</td>
                                            <td class="text-right">100.00</td>
                                            <td class="text-right">1200.00</td>
                                        </tr>
                                        <tr>
                                            <th  class="text-center"><input name="ticketLineCheckbox" type="checkbox"></th>
                                            <td class="text-center"></td>
                                            <td>P100</td>
                                            <td>100 Ton Hauler</td>
                                            <td>2017/10/14</td>
                                            <td>88625415-2547-5</td>
                                            <td>12</td>
                                            <td>Days</td>
                                            <td class="text-right">100.00</td>
                                            <td class="text-right">1200.00</td>
                                        </tr>
                                        <tr>
                                            <th  class="text-center"><input name="ticketLineCheckbox"  type="checkbox"></th>
                                            <td class="text-center"></td>
                                            <td>P100 </td>
                                            <td>100 Ton Hauler</td>
                                            <td>2017/10/14</td>
                                            <td>88625415-2547-5</td>
                                            <td>12</td>
                                            <td>Days</td>
                                            <td class="text-right">100.00</td>
                                            <td class="text-right">1200.00</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title clearfix">
                                    Attachments <div class="btn-group pull-right"><button class="btn btn-sm btn-default">Add Attachment</button></div>
                            </div>
                        </div>
                        <div class="panel-body">
                            {{> templates-attachments-list }}
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title clearfix">
                                Pause Periods
                                <div class="btn-group pull-right">
                                    <button class="btn btn-sm btn-default"
                                        onclick="openEditPausePeriodsModal();">Edit</button>
                                </div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <th class="text-nowrap">Pause</th>
                                        <th class="text-nowrap">Resume</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-nowrap">05/27/2019</td>
                                            <td class="text-nowrap">06/15/2019</td>
                                        </tr>
                                        <tr>
                                            <td class="text-nowrap">01/18/2019</td>
                                            <td class="text-nowrap text-">01/24/2019</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default panel-tab">
                        <div class="panel-heading">
                            <div class="panel-title">&nbsp;</div>
                        </div>
                        <div class="panel-body">
                            <div class="panel-wrapper">
                                <ul class="nav nav-tabs">
                                    <li class="active"><a href="#journalTab" data-toggle="tab">Journal</a></li>
                                    <li><a href="#historyTab" data-toggle="tab">Audit History</a></li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane active" id="journalTab">
                                        <p>
                                            {{> templates-document-journal }}
                                        </p>
                                    </div>
                                    <div class="tab-pane" id="historyTab">
                                        <p>
                                        {{>templates-full-screen-toggle('showTable':'true', 'panelTitle':'History'}}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title clearfix">
                                    Journal
                            </div>
                        </div>
                        <div class="panel-body">
                            {{> templates-document-journal }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{{> organisms-centered-navbar("extraClass":"navbar-fixed-bottom")}}


<div id="pause-periods-modal" class="modal fade in">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">
                    Edit Pause Periods
                </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group col-xs-12 text-right">
                        <div class="btn-group">
                            <button class="btn btn-default" onclick="addPausePeriod();">Add a Pause Period</button>
                            <!-- <button class="btn btn-sm btn-default" onclick="$('.toggleEdit').toggleClass('hide');">Edit </button> -->
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table id="pausePeriods" class="table table-striped table-condensed">
                        <thead>
                            <tr class="text-nowrap">
                                <th>Pause</th>
                                <th>Resume</th>
                                <th>Created By</th>
                                <th class="text-center" width="35">Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="text-nowrap">
                                <td>
                                   <input type="date" class="form-control" value="2019-05-21">
                                </td>
                                <td>
                                    <input type="date" class="form-control" value="2019-05-27">
                                </td>
                                <td>
                                    <p class="form-control-static">Williams, Tom</p>
                                </td>
                                <td class="text-center">
                                     <button class="btn btn-block" onclick="$($(this).closest('tr')).remove()">
                                         <i class="fas fa-trash-alt"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr class="text-nowrap">
                                            <td>
                                                <input type="date" class="form-control" value="2018-02-14">
                                            </td>
                                            <td>
                                                <input type="date" class="form-control" value="2019-02-24">
                                            </td>
                                            <td>
                                                <p class="form-control-static">Erikson, Geoff</p>
                                            </td>
                                            <td class="text-center">
                                                <button class="btn btn-block" onclick="$($(this).closest('tr')).remove()">
                                        <i  class="fas fa-trash-alt"></i>
                                    </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <span class="pull-right">
                    <button type="button" class="btn btn-default" data-dismiss="modal"
                        aria-hidden="true">Cancel</button>
                    <button type="button" class="btn btn-success" data-dismiss="modal" aria-hidden="true"
                        onclick="showAlertDialog('success','<strong>Success!</strong> Your changes were saved successfully.', true);">Save</button>
                </span>
                        </div>
                    </div>
                </div>
            </div>
            <script>
                function openEditPausePeriodsModal() {
                    $('#pause-periods-modal').modal();
                }

                function addPausePeriod() {
                    $('#pausePeriods tr:last').after(' <tr class="text-nowrap"><td> <input type="date" class="form-control" value=""></td><td><input type="date" class="form-control" value=""></td><td><p class="form-control-static">Kyle Agar</p></td><td class="text-center"> <button class="btn btn-block" onclick="$($(this).closest(\'tr\')).remove()"><i  class="fas fa-trash-alt"></i></button></td></tr>');
                }

                $(document).ready(function() {
                    $('body').addClass('page-bg');
                    $('html').addClass('page-bg');
                    $("#selectAllTicketsChk").click(function() {
                        var selectAllChecked = $("#selectAllTicketsChk").prop('checked');
                        $("input[name='ticketLineCheckbox']").prop('checked', selectAllChecked);
                    });
                });
            </script>
